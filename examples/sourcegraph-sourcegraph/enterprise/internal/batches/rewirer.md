# Package rewirer

## Index

* [Types](#type)
    * [type ChangesetRewirer struct](#ChangesetRewirer)
        * [func New(mappings btypes.RewirerMappings, batchChangeID int64) *ChangesetRewirer](#New)
        * [func (r *ChangesetRewirer) Rewire() (changesets []*btypes.Changeset, err error)](#ChangesetRewirer.Rewire)
        * [func (r *ChangesetRewirer) createChangesetForSpec(repo *types.Repo, spec *btypes.ChangesetSpec) *btypes.Changeset](#ChangesetRewirer.createChangesetForSpec)
        * [func (r *ChangesetRewirer) updateChangesetToNewSpec(c *btypes.Changeset, spec *btypes.ChangesetSpec)](#ChangesetRewirer.updateChangesetToNewSpec)
        * [func (r *ChangesetRewirer) createTrackingChangeset(repo *types.Repo, externalID string) *btypes.Changeset](#ChangesetRewirer.createTrackingChangeset)
        * [func (r *ChangesetRewirer) attachTrackingChangeset(changeset *btypes.Changeset)](#ChangesetRewirer.attachTrackingChangeset)
        * [func (r *ChangesetRewirer) closeChangeset(changeset *btypes.Changeset)](#ChangesetRewirer.closeChangeset)
    * [type ErrRepoNotSupported struct](#ErrRepoNotSupported)
        * [func (e ErrRepoNotSupported) Error() string](#ErrRepoNotSupported.Error)
* [Functions](#func)
    * [func checkRepoSupported(repo *types.Repo) error](#checkRepoSupported)
    * [func TestRewirer_Rewire(t *testing.T)](#TestRewirer_Rewire)
    * [func assertResetReconcilerState(a ct.ChangesetAssertions) ct.ChangesetAssertions](#assertResetReconcilerState)


## <a id="type" href="#type">Types</a>

### <a id="ChangesetRewirer" href="#ChangesetRewirer">type ChangesetRewirer struct</a>

```
searchKey: rewirer.ChangesetRewirer
tags: [exported]
```

```Go
type ChangesetRewirer struct {
	// The mappings need to be hydrated for the ChangesetRewirer to consume them.
	mappings      btypes.RewirerMappings
	batchChangeID int64
}
```

#### <a id="New" href="#New">func New(mappings btypes.RewirerMappings, batchChangeID int64) *ChangesetRewirer</a>

```
searchKey: rewirer.New
tags: [exported]
```

```Go
func New(mappings btypes.RewirerMappings, batchChangeID int64) *ChangesetRewirer
```

#### <a id="ChangesetRewirer.Rewire" href="#ChangesetRewirer.Rewire">func (r *ChangesetRewirer) Rewire() (changesets []*btypes.Changeset, err error)</a>

```
searchKey: rewirer.ChangesetRewirer.Rewire
tags: [exported]
```

```Go
func (r *ChangesetRewirer) Rewire() (changesets []*btypes.Changeset, err error)
```

Rewire uses RewirerMappings (mapping ChangesetSpecs to matching Changesets) generated by Store.GetRewirerMappings to update the Changesets for consumption by the background reconciler. 

It also updates the ChangesetIDs on the batch change. 

#### <a id="ChangesetRewirer.createChangesetForSpec" href="#ChangesetRewirer.createChangesetForSpec">func (r *ChangesetRewirer) createChangesetForSpec(repo *types.Repo, spec *btypes.ChangesetSpec) *btypes.Changeset</a>

```
searchKey: rewirer.ChangesetRewirer.createChangesetForSpec
```

```Go
func (r *ChangesetRewirer) createChangesetForSpec(repo *types.Repo, spec *btypes.ChangesetSpec) *btypes.Changeset
```

#### <a id="ChangesetRewirer.updateChangesetToNewSpec" href="#ChangesetRewirer.updateChangesetToNewSpec">func (r *ChangesetRewirer) updateChangesetToNewSpec(c *btypes.Changeset, spec *btypes.ChangesetSpec)</a>

```
searchKey: rewirer.ChangesetRewirer.updateChangesetToNewSpec
```

```Go
func (r *ChangesetRewirer) updateChangesetToNewSpec(c *btypes.Changeset, spec *btypes.ChangesetSpec)
```

#### <a id="ChangesetRewirer.createTrackingChangeset" href="#ChangesetRewirer.createTrackingChangeset">func (r *ChangesetRewirer) createTrackingChangeset(repo *types.Repo, externalID string) *btypes.Changeset</a>

```
searchKey: rewirer.ChangesetRewirer.createTrackingChangeset
```

```Go
func (r *ChangesetRewirer) createTrackingChangeset(repo *types.Repo, externalID string) *btypes.Changeset
```

#### <a id="ChangesetRewirer.attachTrackingChangeset" href="#ChangesetRewirer.attachTrackingChangeset">func (r *ChangesetRewirer) attachTrackingChangeset(changeset *btypes.Changeset)</a>

```
searchKey: rewirer.ChangesetRewirer.attachTrackingChangeset
```

```Go
func (r *ChangesetRewirer) attachTrackingChangeset(changeset *btypes.Changeset)
```

#### <a id="ChangesetRewirer.closeChangeset" href="#ChangesetRewirer.closeChangeset">func (r *ChangesetRewirer) closeChangeset(changeset *btypes.Changeset)</a>

```
searchKey: rewirer.ChangesetRewirer.closeChangeset
```

```Go
func (r *ChangesetRewirer) closeChangeset(changeset *btypes.Changeset)
```

### <a id="ErrRepoNotSupported" href="#ErrRepoNotSupported">type ErrRepoNotSupported struct</a>

```
searchKey: rewirer.ErrRepoNotSupported
tags: [exported]
```

```Go
type ErrRepoNotSupported struct {
	ServiceType string
	RepoName    string
}
```

ErrRepoNotSupported is thrown by the rewirer when it encounters a mapping targetting a repo on a code host that's not supported by batches. 

#### <a id="ErrRepoNotSupported.Error" href="#ErrRepoNotSupported.Error">func (e ErrRepoNotSupported) Error() string</a>

```
searchKey: rewirer.ErrRepoNotSupported.Error
tags: [exported]
```

```Go
func (e ErrRepoNotSupported) Error() string
```

## <a id="func" href="#func">Functions</a>

### <a id="checkRepoSupported" href="#checkRepoSupported">func checkRepoSupported(repo *types.Repo) error</a>

```
searchKey: rewirer.checkRepoSupported
```

```Go
func checkRepoSupported(repo *types.Repo) error
```

checkRepoSupported checks whether the given repository is supported by batch changes and if not it returns an error. 

### <a id="TestRewirer_Rewire" href="#TestRewirer_Rewire">func TestRewirer_Rewire(t *testing.T)</a>

```
searchKey: rewirer.TestRewirer_Rewire
```

```Go
func TestRewirer_Rewire(t *testing.T)
```

### <a id="assertResetReconcilerState" href="#assertResetReconcilerState">func assertResetReconcilerState(a ct.ChangesetAssertions) ct.ChangesetAssertions</a>

```
searchKey: rewirer.assertResetReconcilerState
```

```Go
func assertResetReconcilerState(a ct.ChangesetAssertions) ct.ChangesetAssertions
```

